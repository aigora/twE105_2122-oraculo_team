#include<stdlib.h>
#include<string.h>
#include<conio.h>
#include<time.h>

void titulo();
void menu();                   //Titulo principal en ascii
void historia1();
void historia2();
void investigacion1();
void investigacion2();
void resolver();

int main(void) {
	titulo();
	menu();}

void menu(){
    int nivel, aux;
    char nombre[30], a, b, c;

    printf("***Bienvenido a nuestro ESCAPE ROOM creado por Oraculo Team.***\n\n");
    printf("A continuacion escriba su nombre  para empezar....\n\n");
    printf("Nombre del jugador:");
    scanf("%30[^\n]",&nombre);
    printf("Pulse 1: Para elegir dificultad.\n");
    printf("Pulse 0: Para salir del juego.\n");
    while (scanf("%i", &aux)==0 || (aux!=0 && aux!=1 )) {
        while(getchar() != '\n');
        printf("Pulse 1 o 0!!Por favor!!!\n");
    }
    while(getchar() != '\n');

    if(aux == 0){
        printf("Hasta luego.Vuelva pronto\n");
    }

    if(aux == 1){

        printf("\nEliga nivel:\n a.Bajo\n b.Medio\n c.Alto\n ");
    while(scanf("%c",&nivel), nivel !='a' &&  nivel != 'b' &&  nivel != 'c'){
        while(getchar() != '\n');
        printf("Escriba bien la letra en minusculua!!Por favor!!!\n");
    }
    while(getchar() != '\n');
    switch(nivel){
    case 'a':
        printf("%s ha elegido el nivel Bajo.\nA continuacion empieza el juego...\nSUERTE!!!!!\n",nombre);
        system("pause>>null \n\n");
        system("cls");
        historia1();

int n, a,i=15;
char r;
printf("Para que Marcos encuentre los utensilios para arreglar la gotera, primero tiene que encontrar cual era el numero de la llave del cuarto de las herramientas.\n");
printf(".................... \n");
srand(time(NULL));
n = rand() % 100 +1;
for(i;i>=1;i--){
printf("\n te quedan %i intentos \n", i);
printf("escribe un numero(0-100) : ");

scanf("%i", & a);

if(a<n){
printf("\nte quedas corto \n\n");
}else if(a>n){
printf("\nte pasas \n\n");

}else ;
if(a==n){
 printf("GANASTE!!!!\n ");
 system("pause>>null \n\n");
 system("cls");
 historia2();
 investigacion1();
 investigacion2();
 return 1;
}else;
}
printf("\n perdiste el n�mero es %i", n);

return 0;
break;

    case 'b':
        printf("%s ha elegido el nivel Medio.\nA continuacion empieza el juego...\nSUERTE!!!!!\n",nombre);
        system("pause>>null \n\n");
        system("cls");
        historia1();
        historia2();

        break;

    case 'c':
        printf("%s ha elegido el nivel Alto.\nA continuacion empieza el juego...\nSUERTE!!!!!\n",nombre);
        system("pause>>null \n\n");
        system("cls");


        break;
    }

    }
   system("pause");


}
void titulo() {
printf("\n\n\n");
	printf(" \333\333\333\333\333\333 \333\333\333\333\333   \333\333\333\333\333       \333\333        \333\333\333\333\333\333  \333\333\333\333\333\333    \333\333\333\333\333\333   \333\333\333\333\333   \333\333\333\333\333  \333\333\333       \333\333\333\n");
	printf(" \333\333\333\333\333\333 \333\333\333\333\333 \333\333\333\333\333\333\333      \333\333\333\333       \333\333\333\333\333\333  \333\333\333\333\333\333    \333\333\333\333\333\333  \333\333   \333\333 \333\333   \333\333 \333\333 \333     \333 \333\333\n");
	printf(" \333\333     \333     \333           \333\333  \333\333      \333\333    \333 \333         \333\333    \333 \333\333   \333\333 \333\333   \333\333 \333\333  \333   \333  \333\333\n");
	printf(" \333\333\333\333   \333\333\333\333\333 \333          \333\333    \333\333     \333\333    \333 \333\333\333\333      \333\333    \333 \333\333   \333\333 \333\333   \333\333 \333\333   \333 \333   \333\333\n");
	printf(" \333\333     \333\333\333\333\333 \333         \333\333      \333\333    \333\333    \333 \333         \333\333\333\333\333\333  \333\333   \333\333 \333\333   \333\333 \333\333    \333    \333\333\n");
	printf(" \333\333         \333 \333        \333\333\333\333\333\333\333\333\333\333\333\333   \333\333\333\333\333\333  \333         \333\333 \333\333   \333\333   \333\333 \333\333   \333\333 \333\333         \333\333\n");
	printf(" \333\333\333\333\333\333 \333\333\333\333\333 \333\333\333\333\333\333\333 \333\333          \333\333  \333\333      \333\333\333\333\333\333    \333\333  \333\333  \333\333   \333\333 \333\333   \333\333 \333\333         \333\333\n");
	printf(" \333\333\333\333\333\333 \333\333\333\333\333   \333\333\333\333\333\333\333            \333\333 \333\333      \333\333\333\333\333\333    \333\333   \333\333  \333\333\333\333\333   \333\333\333\333\333  \333\333         \333\333\n");



	system("pause>>null \n\n"); //Paramos el programa sin el mensaje.
	system("cls");
}
void historia1() {
    printf("Nos encontramos en el Castillo de Masterra, donde Marcos, el hombre que se encargaba de su mantenimiento, andaba por el pasillo de la planta baja. Iba hacia la sala de baile ya que se aproximaba una tormenta y había una gotera que arreglar.\n");
    system("pause>>null \n\n");
    system("cls");
}
void historia2(){
    printf("De repente, dos disparos interrumpieron el silencio de la mañana. Marcos supo que habían disparado desde el gabinete de curiosidades donde el vizconde guardaba los recuerdos de sus viajes.\n ");
    printf("Marcos echo a correr y en su carrera se cruzo con Magda, la sobrina del vizconde, y con Arsenio, su marido. Salían precipitados de sus habitaciones. También se encontró con Cristóbal, el hijo y heredero del vizconde.\n");
    printf("Llegaron al gabinete de curiosidades, situado en la torre del catillo. Cristóbal pensó en ponerse delante de la puerta de vidrio con acceso al jardín para atrapar al ladrón, ya que la puerta interior no se podía abrir, ya que estaba cerrada. ");
    printf("Cristóbal se apoyo en la puerta vidriada para ver el interior de la sala y descubrió los cuerpos de sus padres. El joven estrello una piedra contra la puerta para entrar al gabinete que estaba herméticamente cerrado.\n");
    system("pause>>null \n\n");
    system("cls");
}
void investigacion1(){
    printf("Los policías de esta investigación opinan que el marido ha matado a su esposa antes de suicidarse. Pero tú eres un experto en este tipo de casos y no crees que los acontecimientos hayan sucedido así.\n");
    system("pause>>null \n\n");
    system("cls");
}
void investigacion2(){
    printf("Entras al gabinete y lo primero que ves son un montón de vitrinas con centenares de objetos extravagantes. Marcos te explica que era la pasión del vizconde coleccionar este tipo de cosas.\n");
    printf("- ¿Quién encontró los cuerpos? - preguntas\n-Cristóbal y yo, señora- responde Marcos\n-¿vio a alguien huir?\n-No, señora\n-Aquí huele a tabaco. - comentas\n-Al vizconde le gustaba fumar puros en el gabinete.\nLos policías te enseñan la pistola que se encuentra en el suelo, como presunta arma del homicidio.\n");
    printf("Marcos explica que es una pistola antigua de bolsillo de doble cañón, dos disparos, con pólvora. Y los policías agregan que tiene las huellas del vizconde.\nLa habitación cuenta con tres salidas, una puerta que da al vestíbulo, u dos puertas vidriadas que se abren al jardín. Las dos con cerrojos\n");
    printf("-todas las salidas estaban cerradas por dentro, herméticamente- Añade Marcos\n-Bien interrogare a Cristóbal y luego os contare por que esta sala no estaba cerrada herméticamente- dices saliendo del gabinete.\n");
    printf(" La habitación de Cristóbal se encuentra en el primer piso del castillo.\nLe preguntas sobre la relación de sus padres, con lo que contesta que sus padres se llevaban mal. Que su madre no quería seguir viviendo en el castillo, pero su padre no se quería ir.\n");
    printf("Cristóbal te comenta que cuesta mucho mantener el castillo pero que su padre le dedico media vida y parte de su fortuna.\n- ¿Cuándo entrasteis al gabinete, notaste humo?\n");
    printf("-No, solo olía a tabaco, pero aparte de eso no había ningún tipo de humo- responde Cristóbal sorprendido\n-Bien pues le pediré que no deje el castillo antes de que me vaya. Y cuando lo deje será para ir a la cárcel.");
    system("pause>>null \n\n");
    system("cls");
}
void resolver(){
    printf("El gabinete no está herméticamente cerrado porque si lo hubiera estado el sitio olería a pólvora, por lo que los disparos no se hicieron dentro del gabinete.\n");
    printf("Se hicieron desde el exterior y fue Cristóbal quien disparo a través de la puerta vidriada, y volvió al pasillo a esperar a Marcos. Cuando llegaron los dos a la puerta tiro la piedra contra los mismos agujeros de bala. Borro sus huellas y dejo la pistola en la mano de su padre.\n");
    printf("Cristóbal quería heredar la fortuna de su padre y su padre le reprochaba constantemente sus malos hábitos y que le iba a desheredar, esta fue la solución de Cristóbal.");
    system("pause>>null \n\n");
    system("cls");
}
